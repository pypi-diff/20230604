# Comparing `tmp/kaiju_tools-2.0.55-py3-none-any.whl.zip` & `tmp/kaiju_tools-2.0.56-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,108 +1,108 @@
-Zip file size: 127270 bytes, number of entries: 106
--rw-r--r--  2.0 unx     3424 b- defN 23-Apr-28 10:47 kaiju_tools/CLI.py
--rw-r--r--  2.0 unx      285 b- defN 23-Apr-28 10:47 kaiju_tools/__init__.py
--rw-r--r--  2.0 unx     7473 b- defN 23-Apr-28 10:47 kaiju_tools/class_registry.py
--rw-r--r--  2.0 unx     6013 b- defN 23-Apr-28 10:47 kaiju_tools/exceptions.py
--rw-r--r--  2.0 unx      997 b- defN 23-Apr-28 10:47 kaiju_tools/fixtures.py
--rw-r--r--  2.0 unx     8706 b- defN 23-Apr-28 10:47 kaiju_tools/functions.py
--rw-r--r--  2.0 unx     2172 b- defN 23-Apr-28 10:47 kaiju_tools/init_app.py
--rw-r--r--  2.0 unx    10081 b- defN 23-Apr-28 10:47 kaiju_tools/jsonschema.py
--rw-r--r--  2.0 unx      195 b- defN 23-Apr-28 10:47 kaiju_tools/loop.py
--rw-r--r--  2.0 unx    13521 b- defN 23-Apr-28 10:47 kaiju_tools/mapping.py
--rw-r--r--  2.0 unx     6844 b- defN 23-Apr-28 10:47 kaiju_tools/scheduler.py
--rw-r--r--  2.0 unx      159 b- defN 23-Apr-28 10:47 kaiju_tools/serialization.py
--rw-r--r--  2.0 unx     8221 b- defN 23-Apr-28 10:47 kaiju_tools/services.py
--rw-r--r--  2.0 unx    14345 b- defN 23-Apr-28 10:47 kaiju_tools/templates.py
--rw-r--r--  2.0 unx     3442 b- defN 23-Apr-28 10:47 kaiju_tools/ttl_dict.py
--rw-r--r--  2.0 unx     3691 b- defN 23-Apr-28 10:47 kaiju_tools/types.py
--rw-r--r--  2.0 unx     2595 b- defN 23-Apr-28 10:47 kaiju_tools/cache/__init__.py
--rw-r--r--  2.0 unx    10481 b- defN 23-Apr-28 10:47 kaiju_tools/cache/abc.py
--rw-r--r--  2.0 unx     2373 b- defN 23-Apr-28 10:47 kaiju_tools/cache/local_cache.py
--rw-r--r--  2.0 unx       43 b- defN 23-Apr-28 10:47 kaiju_tools/cache/services.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/cache/tests/__init__.py
--rw-r--r--  2.0 unx     2315 b- defN 23-Apr-28 10:47 kaiju_tools/cache/tests/test_cache.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/commands/__init__.py
--rw-r--r--  2.0 unx      932 b- defN 23-Apr-28 10:47 kaiju_tools/config/__init__.py
--rw-r--r--  2.0 unx     7661 b- defN 23-Apr-28 10:47 kaiju_tools/config/config_loader.py
--rw-r--r--  2.0 unx     2969 b- defN 23-Apr-28 10:47 kaiju_tools/config/configurator.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/config/tests/__init__.py
--rw-r--r--  2.0 unx      586 b- defN 23-Apr-28 10:47 kaiju_tools/config/tests/test_configurator.py
--rw-r--r--  2.0 unx      276 b- defN 23-Apr-28 10:47 kaiju_tools/docker/__init__.py
--rw-r--r--  2.0 unx     9769 b- defN 23-Apr-28 10:47 kaiju_tools/docker/containers.py
--rw-r--r--  2.0 unx     7728 b- defN 23-Apr-28 10:47 kaiju_tools/docker/images.py
--rw-r--r--  2.0 unx      103 b- defN 23-Apr-28 10:47 kaiju_tools/docker/services.py
--rw-r--r--  2.0 unx    11140 b- defN 23-Apr-28 10:47 kaiju_tools/docker/stack.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/docker/tests/__init__.py
--rw-r--r--  2.0 unx     1625 b- defN 23-Apr-28 10:47 kaiju_tools/docker/tests/fixtures.py
--rw-r--r--  2.0 unx      575 b- defN 23-Apr-28 10:47 kaiju_tools/docker/tests/test_containers.py
--rw-r--r--  2.0 unx      359 b- defN 23-Apr-28 10:47 kaiju_tools/docker/tests/test_images.py
--rw-r--r--  2.0 unx      371 b- defN 23-Apr-28 10:47 kaiju_tools/docker/tests/test_stack.py
--rw-r--r--  2.0 unx       65 b- defN 23-Apr-28 10:47 kaiju_tools/encoding/__init__.py
--rw-r--r--  2.0 unx     2937 b- defN 23-Apr-28 10:47 kaiju_tools/encoding/abc.py
--rw-r--r--  2.0 unx      163 b- defN 23-Apr-28 10:47 kaiju_tools/encoding/etc.py
--rw-r--r--  2.0 unx     4456 b- defN 23-Apr-28 10:47 kaiju_tools/encoding/json.py
--rw-r--r--  2.0 unx     4353 b- defN 23-Apr-28 10:47 kaiju_tools/encoding/msgpack.py
--rw-r--r--  2.0 unx      654 b- defN 23-Apr-28 10:47 kaiju_tools/encoding/serializers.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/encoding/tests/__init__.py
--rw-r--r--  2.0 unx      780 b- defN 23-Apr-28 10:47 kaiju_tools/encoding/tests/fixtures.py
--rw-r--r--  2.0 unx     1054 b- defN 23-Apr-28 10:47 kaiju_tools/encoding/tests/test_serializers.py
--rw-r--r--  2.0 unx       46 b- defN 23-Apr-28 10:47 kaiju_tools/es/__init__.py
--rw-r--r--  2.0 unx    18302 b- defN 23-Apr-28 10:47 kaiju_tools/es/client.py
--rw-r--r--  2.0 unx     5559 b- defN 23-Apr-28 10:47 kaiju_tools/es/loader.py
--rw-r--r--  2.0 unx    17588 b- defN 23-Apr-28 10:47 kaiju_tools/es/schema.py
--rw-r--r--  2.0 unx       66 b- defN 23-Apr-28 10:47 kaiju_tools/es/services.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/es/tests/__init__.py
--rw-r--r--  2.0 unx       22 b- defN 23-Apr-28 10:47 kaiju_tools/http/__init__.py
--rw-r--r--  2.0 unx     6498 b- defN 23-Apr-28 10:47 kaiju_tools/http/client.py
--rw-r--r--  2.0 unx      932 b- defN 23-Apr-28 10:47 kaiju_tools/http/middlewares.py
--rw-r--r--  2.0 unx     3692 b- defN 23-Apr-28 10:47 kaiju_tools/http/views.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/http/tests/__init__.py
--rw-r--r--  2.0 unx     1533 b- defN 23-Apr-28 10:47 kaiju_tools/http/tests/test_client.py
--rw-r--r--  2.0 unx     2392 b- defN 23-Apr-28 10:47 kaiju_tools/http/tests/test_rpc_rest_view.py
--rw-r--r--  2.0 unx     2344 b- defN 23-Apr-28 10:47 kaiju_tools/locks/__init__.py
--rw-r--r--  2.0 unx     9093 b- defN 23-Apr-28 10:47 kaiju_tools/locks/abc.py
--rw-r--r--  2.0 unx      393 b- defN 23-Apr-28 10:47 kaiju_tools/locks/etc.py
--rw-r--r--  2.0 unx      284 b- defN 23-Apr-28 10:47 kaiju_tools/locks/exceptions.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/locks/tests/__init__.py
--rw-r--r--  2.0 unx     1913 b- defN 23-Apr-28 10:47 kaiju_tools/locks/tests/test_locks.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/logging/__init__.py
--rw-r--r--  2.0 unx     3355 b- defN 23-Apr-28 10:47 kaiju_tools/logging/services.py
--rw-r--r--  2.0 unx    10173 b- defN 23-Apr-28 10:47 kaiju_tools/logging/types.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/logging/tests/__init__.py
--rw-r--r--  2.0 unx     1827 b- defN 23-Apr-28 10:47 kaiju_tools/logging/tests/test_loggers.py
--rw-r--r--  2.0 unx       43 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/__init__.py
--rw-r--r--  2.0 unx    11883 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/abc.py
--rw-r--r--  2.0 unx    14813 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/annotations.py
--rw-r--r--  2.0 unx     4566 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/client.py
--rw-r--r--  2.0 unx     4033 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/client_gen.py
--rw-r--r--  2.0 unx      116 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/context.py
--rw-r--r--  2.0 unx      591 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/etc.py
--rw-r--r--  2.0 unx     2943 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/jsonrpc.py
--rw-r--r--  2.0 unx    24271 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/server.py
--rw-r--r--  2.0 unx       75 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/services.py
--rw-r--r--  2.0 unx     6259 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/sessions.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/tests/__init__.py
--rw-r--r--  2.0 unx     4653 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/tests/fixtures.py
--rw-r--r--  2.0 unx     9187 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/tests/test_annotation_parser.py
--rw-r--r--  2.0 unx     8657 b- defN 23-Apr-28 10:47 kaiju_tools/rpc/tests/test_rpc_server.py
--rw-r--r--  2.0 unx       60 b- defN 23-Apr-28 10:47 kaiju_tools/streams/__init__.py
--rw-r--r--  2.0 unx    24595 b- defN 23-Apr-28 10:47 kaiju_tools/streams/abc.py
--rw-r--r--  2.0 unx      823 b- defN 23-Apr-28 10:47 kaiju_tools/streams/client.py
--rw-r--r--  2.0 unx      152 b- defN 23-Apr-28 10:47 kaiju_tools/streams/etc.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/streams/tests/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/streams/tests/fixtures.py
--rw-r--r--  2.0 unx     5975 b- defN 23-Apr-28 10:47 kaiju_tools/streams/tests/test_streams.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 10:47 kaiju_tools/tests/__init__.py
--rw-r--r--  2.0 unx     2016 b- defN 23-Apr-28 10:47 kaiju_tools/tests/fixtures.py
--rw-r--r--  2.0 unx     1408 b- defN 23-Apr-28 10:47 kaiju_tools/tests/test_class_registry.py
--rw-r--r--  2.0 unx     3385 b- defN 23-Apr-28 10:47 kaiju_tools/tests/test_mapping.py
--rw-r--r--  2.0 unx      481 b- defN 23-Apr-28 10:47 kaiju_tools/tests/test_serialization.py
--rw-r--r--  2.0 unx     2787 b- defN 23-Apr-28 10:47 kaiju_tools/tests/test_services.py
--rw-r--r--  2.0 unx     1692 b- defN 23-Apr-28 10:47 kaiju_tools/tests/test_templates.py
--rw-r--r--  2.0 unx      796 b- defN 23-Apr-28 10:47 kaiju_tools/tests/test_ttl_dict.py
--rw-rw-rw-  2.0 unx      610 b- defN 23-Apr-28 10:47 kaiju_tools-2.0.55.dist-info/LICENSE
--rw-r--r--  2.0 unx     3258 b- defN 23-Apr-28 10:47 kaiju_tools-2.0.55.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-28 10:47 kaiju_tools-2.0.55.dist-info/WHEEL
--rw-r--r--  2.0 unx       12 b- defN 23-Apr-28 10:47 kaiju_tools-2.0.55.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     9178 b- defN 23-Apr-28 10:47 kaiju_tools-2.0.55.dist-info/RECORD
-106 files, 401354 bytes uncompressed, 112664 bytes compressed:  71.9%
+Zip file size: 127626 bytes, number of entries: 106
+-rw-r--r--  2.0 unx     3424 b- defN 23-Jun-04 14:42 kaiju_tools/CLI.py
+-rw-r--r--  2.0 unx      285 b- defN 23-Jun-04 14:42 kaiju_tools/__init__.py
+-rw-r--r--  2.0 unx     7473 b- defN 23-Jun-04 14:42 kaiju_tools/class_registry.py
+-rw-r--r--  2.0 unx     6013 b- defN 23-Jun-04 14:42 kaiju_tools/exceptions.py
+-rw-r--r--  2.0 unx      997 b- defN 23-Jun-04 14:42 kaiju_tools/fixtures.py
+-rw-r--r--  2.0 unx     8706 b- defN 23-Jun-04 14:42 kaiju_tools/functions.py
+-rw-r--r--  2.0 unx     2172 b- defN 23-Jun-04 14:42 kaiju_tools/init_app.py
+-rw-r--r--  2.0 unx    10081 b- defN 23-Jun-04 14:42 kaiju_tools/jsonschema.py
+-rw-r--r--  2.0 unx      195 b- defN 23-Jun-04 14:42 kaiju_tools/loop.py
+-rw-r--r--  2.0 unx    13521 b- defN 23-Jun-04 14:42 kaiju_tools/mapping.py
+-rw-r--r--  2.0 unx     6844 b- defN 23-Jun-04 14:42 kaiju_tools/scheduler.py
+-rw-r--r--  2.0 unx      159 b- defN 23-Jun-04 14:42 kaiju_tools/serialization.py
+-rw-r--r--  2.0 unx     8221 b- defN 23-Jun-04 14:42 kaiju_tools/services.py
+-rw-r--r--  2.0 unx    14345 b- defN 23-Jun-04 14:42 kaiju_tools/templates.py
+-rw-r--r--  2.0 unx     3442 b- defN 23-Jun-04 14:42 kaiju_tools/ttl_dict.py
+-rw-r--r--  2.0 unx     3691 b- defN 23-Jun-04 14:42 kaiju_tools/types.py
+-rw-r--r--  2.0 unx     2595 b- defN 23-Jun-04 14:42 kaiju_tools/cache/__init__.py
+-rw-r--r--  2.0 unx    10483 b- defN 23-Jun-04 14:42 kaiju_tools/cache/abc.py
+-rw-r--r--  2.0 unx     2373 b- defN 23-Jun-04 14:42 kaiju_tools/cache/local_cache.py
+-rw-r--r--  2.0 unx       43 b- defN 23-Jun-04 14:42 kaiju_tools/cache/services.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/cache/tests/__init__.py
+-rw-r--r--  2.0 unx     2315 b- defN 23-Jun-04 14:42 kaiju_tools/cache/tests/test_cache.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/commands/__init__.py
+-rw-r--r--  2.0 unx      932 b- defN 23-Jun-04 14:42 kaiju_tools/config/__init__.py
+-rw-r--r--  2.0 unx     7661 b- defN 23-Jun-04 14:42 kaiju_tools/config/config_loader.py
+-rw-r--r--  2.0 unx     2969 b- defN 23-Jun-04 14:42 kaiju_tools/config/configurator.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/config/tests/__init__.py
+-rw-r--r--  2.0 unx      586 b- defN 23-Jun-04 14:42 kaiju_tools/config/tests/test_configurator.py
+-rw-r--r--  2.0 unx      276 b- defN 23-Jun-04 14:42 kaiju_tools/docker/__init__.py
+-rw-r--r--  2.0 unx     9769 b- defN 23-Jun-04 14:42 kaiju_tools/docker/containers.py
+-rw-r--r--  2.0 unx     7728 b- defN 23-Jun-04 14:42 kaiju_tools/docker/images.py
+-rw-r--r--  2.0 unx      103 b- defN 23-Jun-04 14:42 kaiju_tools/docker/services.py
+-rw-r--r--  2.0 unx    11140 b- defN 23-Jun-04 14:42 kaiju_tools/docker/stack.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/docker/tests/__init__.py
+-rw-r--r--  2.0 unx     1625 b- defN 23-Jun-04 14:42 kaiju_tools/docker/tests/fixtures.py
+-rw-r--r--  2.0 unx      575 b- defN 23-Jun-04 14:42 kaiju_tools/docker/tests/test_containers.py
+-rw-r--r--  2.0 unx      359 b- defN 23-Jun-04 14:42 kaiju_tools/docker/tests/test_images.py
+-rw-r--r--  2.0 unx      371 b- defN 23-Jun-04 14:42 kaiju_tools/docker/tests/test_stack.py
+-rw-r--r--  2.0 unx       65 b- defN 23-Jun-04 14:42 kaiju_tools/encoding/__init__.py
+-rw-r--r--  2.0 unx     3857 b- defN 23-Jun-04 14:42 kaiju_tools/encoding/abc.py
+-rw-r--r--  2.0 unx      163 b- defN 23-Jun-04 14:42 kaiju_tools/encoding/etc.py
+-rw-r--r--  2.0 unx     3437 b- defN 23-Jun-04 14:42 kaiju_tools/encoding/json.py
+-rw-r--r--  2.0 unx     4888 b- defN 23-Jun-04 14:42 kaiju_tools/encoding/msgpack.py
+-rw-r--r--  2.0 unx      654 b- defN 23-Jun-04 14:42 kaiju_tools/encoding/serializers.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/encoding/tests/__init__.py
+-rw-r--r--  2.0 unx      780 b- defN 23-Jun-04 14:42 kaiju_tools/encoding/tests/fixtures.py
+-rw-r--r--  2.0 unx     1132 b- defN 23-Jun-04 14:42 kaiju_tools/encoding/tests/test_serializers.py
+-rw-r--r--  2.0 unx       46 b- defN 23-Jun-04 14:42 kaiju_tools/es/__init__.py
+-rw-r--r--  2.0 unx    18302 b- defN 23-Jun-04 14:42 kaiju_tools/es/client.py
+-rw-r--r--  2.0 unx     5559 b- defN 23-Jun-04 14:42 kaiju_tools/es/loader.py
+-rw-r--r--  2.0 unx    17588 b- defN 23-Jun-04 14:42 kaiju_tools/es/schema.py
+-rw-r--r--  2.0 unx       66 b- defN 23-Jun-04 14:42 kaiju_tools/es/services.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/es/tests/__init__.py
+-rw-r--r--  2.0 unx       22 b- defN 23-Jun-04 14:42 kaiju_tools/http/__init__.py
+-rw-r--r--  2.0 unx     6498 b- defN 23-Jun-04 14:42 kaiju_tools/http/client.py
+-rw-r--r--  2.0 unx      932 b- defN 23-Jun-04 14:42 kaiju_tools/http/middlewares.py
+-rw-r--r--  2.0 unx     3692 b- defN 23-Jun-04 14:42 kaiju_tools/http/views.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/http/tests/__init__.py
+-rw-r--r--  2.0 unx     1533 b- defN 23-Jun-04 14:42 kaiju_tools/http/tests/test_client.py
+-rw-r--r--  2.0 unx     2392 b- defN 23-Jun-04 14:42 kaiju_tools/http/tests/test_rpc_rest_view.py
+-rw-r--r--  2.0 unx     2344 b- defN 23-Jun-04 14:42 kaiju_tools/locks/__init__.py
+-rw-r--r--  2.0 unx     9093 b- defN 23-Jun-04 14:42 kaiju_tools/locks/abc.py
+-rw-r--r--  2.0 unx      393 b- defN 23-Jun-04 14:42 kaiju_tools/locks/etc.py
+-rw-r--r--  2.0 unx      284 b- defN 23-Jun-04 14:42 kaiju_tools/locks/exceptions.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/locks/tests/__init__.py
+-rw-r--r--  2.0 unx     1913 b- defN 23-Jun-04 14:42 kaiju_tools/locks/tests/test_locks.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/logging/__init__.py
+-rw-r--r--  2.0 unx     3355 b- defN 23-Jun-04 14:42 kaiju_tools/logging/services.py
+-rw-r--r--  2.0 unx    10306 b- defN 23-Jun-04 14:42 kaiju_tools/logging/types.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/logging/tests/__init__.py
+-rw-r--r--  2.0 unx     1827 b- defN 23-Jun-04 14:42 kaiju_tools/logging/tests/test_loggers.py
+-rw-r--r--  2.0 unx       43 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/__init__.py
+-rw-r--r--  2.0 unx    11883 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/abc.py
+-rw-r--r--  2.0 unx    14813 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/annotations.py
+-rw-r--r--  2.0 unx     4566 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/client.py
+-rw-r--r--  2.0 unx     4033 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/client_gen.py
+-rw-r--r--  2.0 unx      116 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/context.py
+-rw-r--r--  2.0 unx      591 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/etc.py
+-rw-r--r--  2.0 unx     2943 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/jsonrpc.py
+-rw-r--r--  2.0 unx    24013 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/server.py
+-rw-r--r--  2.0 unx       75 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/services.py
+-rw-r--r--  2.0 unx     6259 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/sessions.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/tests/__init__.py
+-rw-r--r--  2.0 unx     4653 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/tests/fixtures.py
+-rw-r--r--  2.0 unx     9187 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/tests/test_annotation_parser.py
+-rw-r--r--  2.0 unx     8649 b- defN 23-Jun-04 14:42 kaiju_tools/rpc/tests/test_rpc_server.py
+-rw-r--r--  2.0 unx       60 b- defN 23-Jun-04 14:42 kaiju_tools/streams/__init__.py
+-rw-r--r--  2.0 unx    24599 b- defN 23-Jun-04 14:42 kaiju_tools/streams/abc.py
+-rw-r--r--  2.0 unx      823 b- defN 23-Jun-04 14:42 kaiju_tools/streams/client.py
+-rw-r--r--  2.0 unx      152 b- defN 23-Jun-04 14:42 kaiju_tools/streams/etc.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/streams/tests/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/streams/tests/fixtures.py
+-rw-r--r--  2.0 unx     5975 b- defN 23-Jun-04 14:42 kaiju_tools/streams/tests/test_streams.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 14:42 kaiju_tools/tests/__init__.py
+-rw-r--r--  2.0 unx     2016 b- defN 23-Jun-04 14:42 kaiju_tools/tests/fixtures.py
+-rw-r--r--  2.0 unx     1408 b- defN 23-Jun-04 14:42 kaiju_tools/tests/test_class_registry.py
+-rw-r--r--  2.0 unx     3385 b- defN 23-Jun-04 14:42 kaiju_tools/tests/test_mapping.py
+-rw-r--r--  2.0 unx      481 b- defN 23-Jun-04 14:42 kaiju_tools/tests/test_serialization.py
+-rw-r--r--  2.0 unx     2787 b- defN 23-Jun-04 14:42 kaiju_tools/tests/test_services.py
+-rw-r--r--  2.0 unx     1692 b- defN 23-Jun-04 14:42 kaiju_tools/tests/test_templates.py
+-rw-r--r--  2.0 unx      796 b- defN 23-Jun-04 14:42 kaiju_tools/tests/test_ttl_dict.py
+-rw-rw-rw-  2.0 unx      610 b- defN 23-Jun-04 14:43 kaiju_tools-2.0.56.dist-info/LICENSE
+-rw-r--r--  2.0 unx     3258 b- defN 23-Jun-04 14:43 kaiju_tools-2.0.56.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-04 14:43 kaiju_tools-2.0.56.dist-info/WHEEL
+-rw-r--r--  2.0 unx       12 b- defN 23-Jun-04 14:43 kaiju_tools-2.0.56.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     9178 b- defN 23-Jun-04 14:43 kaiju_tools-2.0.56.dist-info/RECORD
+106 files, 401741 bytes uncompressed, 113020 bytes compressed:  71.9%
```

## zipnote {}

```diff
@@ -297,23 +297,23 @@
 
 Filename: kaiju_tools/tests/test_templates.py
 Comment: 
 
 Filename: kaiju_tools/tests/test_ttl_dict.py
 Comment: 
 
-Filename: kaiju_tools-2.0.55.dist-info/LICENSE
+Filename: kaiju_tools-2.0.56.dist-info/LICENSE
 Comment: 
 
-Filename: kaiju_tools-2.0.55.dist-info/METADATA
+Filename: kaiju_tools-2.0.56.dist-info/METADATA
 Comment: 
 
-Filename: kaiju_tools-2.0.55.dist-info/WHEEL
+Filename: kaiju_tools-2.0.56.dist-info/WHEEL
 Comment: 
 
-Filename: kaiju_tools-2.0.55.dist-info/top_level.txt
+Filename: kaiju_tools-2.0.56.dist-info/top_level.txt
 Comment: 
 
-Filename: kaiju_tools-2.0.55.dist-info/RECORD
+Filename: kaiju_tools-2.0.56.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## kaiju_tools/__init__.py

```diff
@@ -4,10 +4,10 @@
 from .es import *
 from .cache import *
 from .locks import *
 from .streams import *
 from .logging.services import *
 from .scheduler import *
 
-__version__ = '2.0.55'
+__version__ = '2.0.56'
 __python_version__ = '3.8'
 __author__ = 'antonnidhoggr@me.com'
```

## kaiju_tools/cache/abc.py

```diff
@@ -89,15 +89,15 @@
         :param serializers: serializers registry with all serializers classes
         :param logger:
         """
         Service.__init__(self, app=app, logger=logger)
         self._namespace = namespace if namespace else app['name']
         self._transport_name = transport
         self._default_ttl = max(self.DEFAULT_TTL, int(default_ttl))
-        self._serializer = serializers[serializer_type]
+        self._serializer = serializers[serializer_type]()
         self._transport = None
         self._queue = None
 
     async def init(self):
         """Service context init."""
         self._transport = self.discover_service(self._transport_name, cls=self.transport_cls)
```

## kaiju_tools/encoding/abc.py

```diff
@@ -1,10 +1,13 @@
 import abc
+from typing import cast
 
-__all__ = ['SerializerInterface', 'Serializable']
+from kaiju_tools.class_registry import AbstractClassRegistry
+
+__all__ = ['SerializerInterface', 'Serializable', 'SerializedClass', 'SerializedClasses']
 
 
 class Serializable(abc.ABC):
     """Class which supports serialization of its attributes."""
 
     serializable_attrs = None  #: Should be a frozenset or None. If None, then all will be used for serialization.
     include_null_values = True  #: include null values in a representation
@@ -55,19 +58,48 @@
 
         return _repr
 
     def __repr__(self):
         return f'{self.__class__.__name__}(**{self.repr()})'
 
 
+class SerializedClass(Serializable):
+    """Serialized class."""
+
+    def repr(self) -> dict:
+        return {'__cls': self.__class__.__name__, '__attrs': super().repr()}
+
+    @classmethod
+    def from_repr(cls, attrs: dict):
+        return cls(**attrs)  # noqa
+
+
+class SerializedClasses(AbstractClassRegistry):
+    """Serialized class."""
+
+    base_classes = [SerializedClass]
+
+
 class SerializerInterface(abc.ABC):
     """Abstract serializer interface that should be used by clients/servers to process raw messages."""
 
     mime_type = None  # you should define an appropriate mime type here
 
+    def __init__(self, types: SerializedClasses = None):
+        self.types = types if types else SerializedClasses()
+
+    def _load_serialized_obj(self, obj: dict):
+        if '__cls' not in obj:
+            return obj
+        cls = obj['__cls']
+        if cls not in self.types:
+            return obj['__attrs']
+        cls = cast(SerializedClass, self.types[cls])
+        return cls.from_repr(obj['__attrs'])
+
     @classmethod
     @abc.abstractmethod
     def loads(cls, data, *args, **kws):
         pass
 
     @classmethod
     @abc.abstractmethod
```

## kaiju_tools/encoding/json.py

```diff
@@ -1,177 +1,129 @@
 from collections.abc import Mapping
 from enum import Enum
 from types import SimpleNamespace
+from typing import NamedTuple
 
+import rapidjson
 import rapidjson as rj  # type: ignore
 
 from .abc import SerializerInterface, Serializable
 from .etc import MimeTypes
 
-__all__ = ('dumps', 'dumps_bytes', 'loads', 'load', 'Serializer')
-
-
-def _dumps_defaults(value):
-    if isinstance(value, Serializable):
-        return {k: _dumps_defaults(v) for k, v in value.repr().items()}
-    elif isinstance(value, Mapping):
-        return dict(value)
-    elif type(value) == set or type(value) == frozenset:
-        return list(value)
-    elif type(value) == SimpleNamespace:
-        return value.__dict__
-    elif isinstance(value, Enum):
-        return value.value
-    elif type(value) is bytes:
-        return '[BYTES]'
-    else:
-        return value
-
-
-def dumps(
-    value,
-    *args,
-    uuid_mode=rj.UM_CANONICAL,
-    datetime_mode=rj.DM_ISO8601,
-    ensure_ascii=False,
-    number_mode=rj.NM_DECIMAL,
-    allow_nan=False,
-    default=_dumps_defaults,
-    **kws,
-):
-    """Use `dumps`, but with useful default serialization settings."""
-    return rj.dumps(
-        value,
-        *args,
-        uuid_mode=uuid_mode,
-        ensure_ascii=ensure_ascii,
-        datetime_mode=datetime_mode,
-        number_mode=number_mode,
-        allow_nan=allow_nan,
-        default=default,
-        **kws,
-    )
-
-
-def dumps_bytes(
-    value,
-    *args,
-    uuid_mode=rj.UM_CANONICAL,
-    datetime_mode=rj.DM_ISO8601,
-    ensure_ascii=False,
-    number_mode=rj.NM_DECIMAL,
-    allow_nan=False,
-    default=_dumps_defaults,
-    **kws,
-):
-    """Use `dumps`, but with useful default serialization settings."""
-    return rj.dumps(
-        value,
-        *args,
-        uuid_mode=uuid_mode,
-        ensure_ascii=ensure_ascii,
-        datetime_mode=datetime_mode,
-        number_mode=number_mode,
-        allow_nan=allow_nan,
-        default=default,
-        **kws,
-    ).encode('utf-8')
-
-
-def loads(
-    value,
-    *args,
-    uuid_mode=rj.UM_CANONICAL,
-    datetime_mode=rj.DM_ISO8601,
-    number_mode=rj.NM_DECIMAL,
-    allow_nan=False,
-    **kws,
-):
-    """Use `loads`, but with useful default serialization settings."""
-    return rj.loads(
-        value,
-        *args,
-        uuid_mode=uuid_mode,
-        datetime_mode=datetime_mode,
-        number_mode=number_mode,
-        allow_nan=allow_nan,
-        **kws,
-    )
-
-
-def load(
-    *args, uuid_mode=rj.UM_CANONICAL, datetime_mode=rj.DM_ISO8601, number_mode=rj.NM_DECIMAL, allow_nan=False, **kws
-):
-    """Use `load`, but with useful default serialization settings."""
-    return rj.load(
-        *args, uuid_mode=uuid_mode, datetime_mode=datetime_mode, number_mode=number_mode, allow_nan=allow_nan, **kws
-    )
+__all__ = ('dumps', 'dumps_bytes', 'loads', 'load', 'Serializer', 'JSONEncoder')
 
 
 class Serializer(SerializerInterface):
     """Base serializer class."""
 
     mime_type = MimeTypes.json
-    default = _dumps_defaults
 
     @classmethod
+    def _dumps_defaults(cls, value):
+        if isinstance(value, Serializable):
+            return value.repr()
+        elif type(value) in {set, frozenset, tuple, NamedTuple}:
+            return list(value)
+        elif type(value) == SimpleNamespace:
+            return value.__dict__
+        elif isinstance(value, Enum):
+            return value.value
+        elif type(value) is bytes:
+            return '[BYTES]'
+        else:
+            raise ValueError(value)
+
     def dumps(
-        cls,
+        self,
         *args,
         uuid_mode=rj.UM_CANONICAL,
         datetime_mode=rj.DM_ISO8601,
         ensure_ascii=False,
         number_mode=rj.NM_DECIMAL,
+        iterable_mode=rj.IM_ONLY_LISTS,
         allow_nan=False,
-        default=_dumps_defaults,
         **kws,
     ):
         return rj.dumps(
             *args,
             uuid_mode=uuid_mode,
             ensure_ascii=ensure_ascii,
             datetime_mode=datetime_mode,
             number_mode=number_mode,
+            iterable_mode=iterable_mode,
             allow_nan=allow_nan,
-            default=cls.default,
+            default=self._dumps_defaults,
             **kws,
         )
 
-    @classmethod
     def dumps_bytes(
-        cls,
+        self,
         value,
         *args,
         uuid_mode=rj.UM_CANONICAL,
         datetime_mode=rj.DM_ISO8601,
         ensure_ascii=False,
         number_mode=rj.NM_DECIMAL,
+        iterable_mode=rj.IM_ONLY_LISTS,
         allow_nan=False,
-        default=_dumps_defaults,
         **kws,
     ):
         """Use `dumps`, but with useful default serialization settings."""
         return rj.dumps(
             value,
             *args,
             uuid_mode=uuid_mode,
             ensure_ascii=ensure_ascii,
             datetime_mode=datetime_mode,
             number_mode=number_mode,
+            iterable_mode=iterable_mode,
             allow_nan=allow_nan,
-            default=cls.default,
+            default=self._dumps_defaults,
             **kws,
         ).encode('utf-8')
 
-    @classmethod
     def loads(
-        cls,
+        self,
         *args,
         uuid_mode=rj.UM_CANONICAL,
         datetime_mode=rj.DM_ISO8601,
         number_mode=rj.NM_DECIMAL,
         allow_nan=False,
         **kws,
     ):
         return rj.loads(
-            *args, uuid_mode=uuid_mode, datetime_mode=datetime_mode, number_mode=number_mode, allow_nan=allow_nan, **kws
+            *args,
+            uuid_mode=uuid_mode,
+            datetime_mode=datetime_mode,
+            number_mode=number_mode,
+            allow_nan=allow_nan,
+            object_hook=self._load_serialized_obj,
+            **kws,
         )
+
+    def load(
+        self,
+        *args,
+        uuid_mode=rj.UM_CANONICAL,
+        datetime_mode=rj.DM_ISO8601,
+        number_mode=rj.NM_DECIMAL,
+        allow_nan=False,
+        **kws,
+    ):
+        """Use `load`, but with useful default serialization settings."""
+        return rj.load(
+            *args,
+            uuid_mode=uuid_mode,
+            datetime_mode=datetime_mode,
+            number_mode=number_mode,
+            allow_nan=allow_nan,
+            object_hook=self._load_serialized_obj,
+            **kws,
+        )
+
+
+JSONEncoder = Serializer
+_encoder = Serializer()
+dumps = _encoder.dumps
+loads = _encoder.loads
+load = _encoder.load
+dumps_bytes = _encoder.dumps_bytes
```

## kaiju_tools/encoding/msgpack.py

```diff
@@ -1,22 +1,22 @@
 import abc
 import calendar
 import datetime
 import uuid
 from decimal import Decimal
 from enum import Enum
-from typing import Mapping
+from typing import Mapping, cast
 from types import SimpleNamespace
 
 import msgpack
 from msgpack import dumps as msgpack_dumps
 from msgpack import loads as msgpack_loads
 
 from kaiju_tools.class_registry import AbstractClassRegistry
-from .abc import SerializerInterface, Serializable
+from .abc import SerializerInterface, Serializable, SerializedClass
 from .etc import MimeTypes
 
 __all__ = ('MsgpackType', 'ReservedClassIDs', 'Types', 'msgpack_types', 'dumps', 'loads', 'Serializer')
 
 
 class MsgpackType(abc.ABC):
     """Serializable binary object."""
@@ -28,32 +28,33 @@
             'You either need to inherit from `kaiju_tools.serialization.Serializable`'
             ' or to set up your own `repr()` method or to set up you own'
             ' `pack_b` and `unpack_b` methods.'
         )
 
     def to_bytes(self) -> bytes:
         """Pack object to bytes (you can use a struct here to optimize size)."""
-        return dumps(self.repr())
+        return dumps(self.repr())  # noqa
 
     @classmethod
     def from_bytes(cls, data: bytes) -> 'MsgpackType':
         """Unpack bytes into object."""
-        return cls(**loads(data))
+        return cls(**loads(data))  # noqa
 
 
 class ReservedClassIDs:
     """Msgpack ids reserved by the library."""
 
     # reserved from 0 to 16 (incl.)
 
     uuid = 1
     datetime = 3
     decimal = 4
     date = 5
 
+    serialized_class = 19
     jsonrpc_request = 20
     jsonrpc_response = 21
     jsonrpc_error = 22
 
 
 class Types(AbstractClassRegistry):
     """Msgpack types registry."""
@@ -71,76 +72,74 @@
         if not 16 < key < 128:
             raise ValueError('Msgpack ext type id allowed to be in range from 17 to 127 but got "%s".', key)
 
 
 msgpack_types = Types(raise_if_exists=True)
 
 
-def _default_types(obj):
-    """Convert type."""
-    if isinstance(obj, uuid.UUID):
-        return msgpack.ExtType(ReservedClassIDs.uuid, obj.bytes)
-    elif isinstance(obj, datetime.datetime):
-        return msgpack.ExtType(ReservedClassIDs.datetime, msgpack_dumps(calendar.timegm(obj.utctimetuple())))
-    elif isinstance(obj, datetime.date):
-        return msgpack.ExtType(ReservedClassIDs.date, msgpack_dumps(calendar.timegm(obj.timetuple())))
-    elif isinstance(obj, MsgpackType):
-        return msgpack.ExtType(obj.ext_class_id, obj.to_bytes())
-    elif isinstance(obj, Serializable):
-        return {k: _default_types(v) for k, v in obj.repr().items()}
-    elif isinstance(obj, (set, frozenset)):
-        return list(obj)
-    elif isinstance(obj, Mapping):
-        return dict(obj)
-    elif type(obj) == SimpleNamespace:
-        return obj.__dict__
-    elif isinstance(obj, Enum):
-        return obj.value
-    elif type(obj) == Decimal:
-        return msgpack.ExtType(ReservedClassIDs.decimal, msgpack_dumps(str(obj)))
-    else:
-        return obj
-
-
-def _ext_hook(code, data):
-    """Load type."""
-    if code == ReservedClassIDs.uuid:
-        return uuid.UUID(bytes=data)
-    elif code == ReservedClassIDs.datetime:
-        return datetime.datetime.utcfromtimestamp(msgpack_loads(data))
-    elif code == ReservedClassIDs.date:
-        return datetime.date.fromtimestamp(msgpack_loads(data))
-    elif code == ReservedClassIDs.decimal:
-        return Decimal(msgpack_loads(data))
-    elif code in msgpack_types:
-        cls = msgpack_types[code]
-        return cls.from_bytes(data)
-    else:
-        raise ValueError(code)
-
-
-def dumps(*args, **kws):
-    return msgpack_dumps(*args, default=_default_types, **kws)
-
-
-def loads(*args, **kws):
-    return msgpack_loads(*args, ext_hook=_ext_hook, **kws)
-
-
 class Serializer(SerializerInterface):
     """Base serializer class."""
 
     mime_type = MimeTypes.msgpack
-    ext_hook = _ext_hook
-    default = _default_types
-
-    @classmethod
-    def loads(cls, *args, **kws):
-        return msgpack_loads(*args, ext_hook=cls.ext_hook, **kws)
-
-    @classmethod
-    def dumps(cls, *args, **kws):
-        return msgpack_dumps(*args, default=cls.default, **kws)
 
     @classmethod
-    def dumps_bytes(cls, *args, **kws):
-        return msgpack_dumps(*args, default=cls.default, **kws)
+    def _default_types(cls, obj):
+        """Convert type."""
+        if isinstance(obj, uuid.UUID):
+            return msgpack.ExtType(ReservedClassIDs.uuid, obj.bytes)
+        elif isinstance(obj, datetime.datetime):
+            return msgpack.ExtType(ReservedClassIDs.datetime, msgpack_dumps(calendar.timegm(obj.utctimetuple())))
+        elif isinstance(obj, datetime.date):
+            return msgpack.ExtType(ReservedClassIDs.date, msgpack_dumps(calendar.timegm(obj.timetuple())))
+        elif isinstance(obj, MsgpackType):
+            return msgpack.ExtType(obj.ext_class_id, obj.to_bytes())
+        elif isinstance(obj, SerializedClass):
+            return msgpack.ExtType(ReservedClassIDs.serialized_class, msgpack_dumps(tuple(obj.repr().values())))
+        elif isinstance(obj, Serializable):
+            return {k: cls._default_types(v) for k, v in obj.repr().items()}
+        elif isinstance(obj, (set, frozenset)):
+            return list(obj)
+        elif isinstance(obj, Mapping):
+            return dict(obj)
+        elif type(obj) == SimpleNamespace:
+            return obj.__dict__
+        elif isinstance(obj, Enum):
+            return obj.value
+        elif type(obj) == Decimal:
+            return msgpack.ExtType(ReservedClassIDs.decimal, msgpack_dumps(str(obj)))
+        else:
+            return obj
+
+    def _ext_hook(self, code, data):
+        """Load type."""
+        if code == ReservedClassIDs.uuid:
+            return uuid.UUID(bytes=data)
+        elif code == ReservedClassIDs.datetime:
+            return datetime.datetime.utcfromtimestamp(msgpack_loads(data))
+        elif code == ReservedClassIDs.date:
+            return datetime.date.fromtimestamp(msgpack_loads(data))
+        elif code == ReservedClassIDs.decimal:
+            return Decimal(msgpack_loads(data))
+        elif code == ReservedClassIDs.serialized_class:
+            data = msgpack_loads(data)
+            return self._load_serialized_obj({'__cls': data[0], '__attrs': data[1]})
+        elif code in msgpack_types:
+            cls = cast(MsgpackType, msgpack_types[code])
+            return cls.from_bytes(data)
+        elif type(data) is dict and '__cls' in data:
+            return self._load_serialized_obj(data)
+        else:
+            raise ValueError(code)
+
+    def loads(self, *args, **kws):
+        return msgpack_loads(*args, ext_hook=self._ext_hook, **kws)
+
+    def dumps(self, *args, **kws):
+        return msgpack_dumps(*args, default=self._default_types, **kws)
+
+    def dumps_bytes(self, *args, **kws):
+        return msgpack_dumps(*args, default=self._default_types, **kws)
+
+
+_serializer = Serializer()
+dumps = _serializer.dumps
+loads = _serializer.loads
```

## kaiju_tools/encoding/tests/test_serializers.py

```diff
@@ -1,29 +1,31 @@
-from typing import cast
+from typing import cast, Type
 
 import pytest
 
 from ..serializers import serializers
 from ..abc import SerializerInterface
 from .fixtures import *
 
 
 @pytest.mark.parametrize('serializer', tuple(serializers.values()), ids=tuple(serializers.keys()))
 def test_serializers(serializer, serializable_data, logger):
-    serializer = cast(SerializerInterface, serializer)
+    serializer = cast(Type[SerializerInterface], serializer)
+    serializer = serializer()
     s = serializer.dumps(serializable_data)
     logger.debug(s)
     data = serializer.loads(s)
     logger.debug(serializable_data)
     logger.debug(data)
     assert serializable_data == data
 
 
 @pytest.mark.parametrize('serializer', tuple(serializers.values()), ids=tuple(serializers.keys()))
 def test_serializers_for_special_objects(serializer, serializable_special_objects, logger):
-    serializer = cast(SerializerInterface, serializer)
+    serializer = cast(Type[SerializerInterface], serializer)
+    serializer = serializer()
     s = serializer.dumps(serializable_special_objects)
     logger.debug(s)
     data = serializer.loads(s)
     logger.debug(serializable_special_objects)
     logger.debug(data)
     assert {k: v.repr() for k, v in serializable_special_objects.items()} == data
```

## kaiju_tools/logging/types.py

```diff
@@ -287,15 +287,17 @@
         if record._data:
             msg['data'] = record._data
         if record.exc_info:
             error_cls, error, stack = record.exc_info
             if not isinstance(error, APIException):
                 error = InternalError(message=str(error), base_exc=error)
             error.debug = self._debug
+            error.debug = True  # a little hack to enable trace info (probably there's a better way)
             msg['error'] = error.repr()
+            error.debug = False
             if stack:
                 msg['error']['trace'] = {
                     'file': inspect.getabsfile(stack.tb_next),
                     'lineno': stack.tb_next.tb_lineno,
                 }
         return msg  # noqa
```

## kaiju_tools/rpc/server.py

```diff
@@ -62,14 +62,20 @@
     f: Callable
     signature: FunctionAnnotation
     service_name: str
     permission: Scope
     validator: Callable
 
 
+class LogFmt:
+    NONE = 'NONE'
+    SHORT = 'SHORT'
+    FULL = 'FULL'
+
+
 class JSONRPCServer(ContextableService, AbstractRPCCompatible):
     """A simple JSON RPC interface with method execution and management tasks."""
 
     service_name = 'rpc'
     _permission_levels = {
         AbstractRPCCompatible.PermissionKeys.GLOBAL_SYSTEM_PERMISSION: Scope.SYSTEM,
         AbstractRPCCompatible.PermissionKeys.GLOBAL_USER_PERMISSION: Scope.USER,
@@ -81,46 +87,45 @@
         app,
         *,
         session_service: BaseSessionService = None,
         max_parallel_tasks: int = 64,
         default_request_time: int = 120,
         max_request_time: int = 600,
         enable_permissions: bool = True,
-        request_logs: bool = True,
-        full_request_logs: bool = False,
+        request_logs: bool = False,
+        response_logs: bool = False,
         blacklist_routes: List[str] = None,
         blacklist_scope: int = Scope.SYSTEM.value - 1,
         use_annotation_parser: bool = True,
         logger=None,
     ):
         """Initialize.
 
         :param app: web app
         :param session_service: session backend
         :param max_parallel_tasks: max number of tasks in the loop
         :param default_request_time: (s)
         :param max_request_time: (s)
         :param enable_permissions: enable perm checks in requests
-        :param request_logs: show request logs, only errors are shown if set to False
-        :param full_request_logs: enable full request logs (always true for debug mode)
+        :param request_logs: log request body and also log responses (even successful ones)
         :param blacklist_routes: wildcard patterns to blacklist certain RPC routes
         :param blacklist_scope: integer value to blacklist permission scopes lower or equal to this value
         :param use_annotation_parser: annotation parser for non-validated method will be used and will try to
             create a method validator from its annotations
         :param logger:
         """
         ContextableService.__init__(self, app=app, logger=logger)
         self._sessions = session_service
         self._max_parallel_tasks = max(1, int(max_parallel_tasks))
         self._default_request_time = max(1, int(default_request_time))
         self._max_request_time = max(self._default_request_time, int(max_request_time))
         self._enable_permissions = enable_permissions
         self._debug = self.app.debug
         self._request_logs = request_logs
-        self._full_request_logs = full_request_logs or self._debug
+        self._response_logs = response_logs
         self._blacklist_routes = blacklist_routes if blacklist_routes else []
         self._blacklist_scope = blacklist_scope
         self._use_annotation_parser = use_annotation_parser
         self._counter = self._max_parallel_tasks
         self._not_full = asyncio.Event()
         self._not_full.set()
         self._empty = asyncio.Event()
@@ -551,41 +556,34 @@
         f: Callable,
         params: dict,
         retries: int,
         request_id: _RequestId,
         request: dict,
     ) -> Union[RPCResponse, RPCError]:
         """Execute a coro and process an exception."""
-        if self._request_logs:
-            if not self._full_request_logs and not self._debug:
-                request['params'] = '...'
-            self.logger.info('rpc accepted', request=request)
+        if self._debug or self._request_logs:
+            self.logger.info('Accepted', request=request)
         try:
             if retries:
                 result = await retry(f, kws=params, retries=retries, logger=self.logger)
             else:
                 result = await f(**params)
-            result = RPCResponse(id=request_id, result=result)
-            _error = False
         except ClientError as exc:
-            _error, result = True, exc
+            result = RPCError(id=request_id, error=exc)
+            self.logger.info('Client error', error=True, result=exc)
         except APIException as exc:
-            _error, result = True, exc
-            self.logger.error('Internal error', exc_info=exc)
+            result = RPCError(id=request_id, error=exc)
+            self.logger.error('Api error', error=True, request=request, exc_info=exc)
         except Exception as exc:
-            _error, result = True, InternalError(base_exc=exc, message='Internal error')
-            self.logger.error('Internal error', exc_info=exc)
-        if _error:
-            if self._debug:
-                result.debug = True
-            self.logger.info('rpc error', request=request, exc_info=result)
-            result = RPCError(id=request_id, error=result)
-        elif self._request_logs or self._debug:
-            _result = result.result if self._full_request_logs else '...'
-            self.logger.info('rpc finished', request=request, result=_result)
+            result = RPCError(id=request_id, error=InternalError(base_exc=exc, message='Internal error'))
+            self.logger.error('Internal error', error=True, request=request, exc_info=exc)
+        else:
+            result = RPCResponse(id=request_id, result=result)
+            if self._debug or self._response_logs:
+                self.logger.info('Finished', error=False, result=result.result)
         return result
 
     def _request_done_cb(self, task: asyncio.Task) -> None:
         """Increment the counter when a request is finished."""
         self._counter += 1
         if self._counter >= self._max_parallel_tasks:
             self._counter = self._max_parallel_tasks
```

## kaiju_tools/rpc/tests/test_rpc_server.py

```diff
@@ -36,16 +36,16 @@
 
     print(f'\nJSON RPC Queued Service simple benchmark (best of {n}).')
     print(f'{parallel} connections\n')
     print(system_information)
 
     async with rpc_interface as rpc:
         rpc_interface._debug = False
-        # rpc_interface._full_request_logs = False
-        # rpc_interface._request_logs = False
+        rpc_interface._request_logs = False
+        rpc_interface._response_logs = False
         rpc.register_service('do', _Service(None))
         tasks = [asyncio.create_task(_do_call(rpc)) for _ in range(parallel)]
         t0 = time()
         while counter < requests:
             await asyncio.sleep(0.1)
         t1 = time()
         await asyncio.gather(*tasks)
```

## kaiju_tools/streams/abc.py

```diff
@@ -66,15 +66,15 @@
         self.topic_name = topic
         self.namespace = namespace if namespace else app.name
         self.topic = self.get_topic_key(app.env, self.namespace, self.topic_name)
         super().__init__(app=app, logger=logger)
         self._settings = settings
         self._rpc = rpc_service
         self.locking_key = self.get_locking_key(self.namespace, self.topic_name)
-        self._serializer: SerializerInterface = serializers[content_type]
+        self._serializer: SerializerInterface = serializers[content_type]()
         self._transport = transport
         self._locks: BaseLocksService = locks_service
         self._producer = producer
         self._callback_service = callback_service
         self._closing = True
         self._task = None
         self._consumer = None
@@ -288,15 +288,15 @@
         :param logger:
         """
         super().__init__(app=app, logger=logger)
         self._env = app.env
         self._namespace = namespace if namespace else app.name
         self._transport = transport
         self._settings = settings
-        self._serializer: SerializerInterface = serializers[content_type]
+        self._serializer: SerializerInterface = serializers[content_type]()
         self._closing = False
         self._closed = False
 
     async def init(self):
         self._closing = False
         await self._init()
         self._closed = False
```

## Comparing `kaiju_tools-2.0.55.dist-info/LICENSE` & `kaiju_tools-2.0.56.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `kaiju_tools-2.0.55.dist-info/METADATA` & `kaiju_tools-2.0.56.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kaiju-tools
-Version: 2.0.55
+Version: 2.0.56
 Summary: Base classes and services for a backend application.
 Home-page: https://gitlab.com/kaiju-python/kaiju-tools
 Author: antonnidhoggr@me.com
 Author-email: antonnidhoggr@me.com
 License: Apache Software License 2.0
 Classifier: Development Status :: 3 - Alpha
 Classifier: License :: OSI Approved :: Apache Software License
```

## Comparing `kaiju_tools-2.0.55.dist-info/RECORD` & `kaiju_tools-2.0.56.dist-info/RECORD`

 * *Files 5% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 kaiju_tools/CLI.py,sha256=JAggZ74FQZmu-Wr5vYzy0-dMB5zH3vQewDGe2lnW5eo,3424
-kaiju_tools/__init__.py,sha256=xBG1F6zhqrfhunvTU5bowaPretPjT4Owc7sztM_---M,285
+kaiju_tools/__init__.py,sha256=qQuXJYsv9IIZaB_8mp9O3-GGcSBAp6jmMpYAxq9GiAY,285
 kaiju_tools/class_registry.py,sha256=sKn9YmblEeTBhcC_ivoGGTlBFXMG2G2WAsztdk1xBcE,7473
 kaiju_tools/exceptions.py,sha256=DJrtHxE3oWR9p7il2E8Q3r0P-JSKcDkwo57lcy74604,6013
 kaiju_tools/fixtures.py,sha256=h1ElRgENikjde-uXvk_exA_SvMPuxqtxo0qaiYDhCWk,997
 kaiju_tools/functions.py,sha256=w-EBoc8ZqSo0NDLdoyCjC_flxk-wL08aNMov8Akw-Uk,8706
 kaiju_tools/init_app.py,sha256=J5eDuiZqskrBWSjgM2d8CdsYkt28nqgrOLT4Ms8AZjg,2172
 kaiju_tools/jsonschema.py,sha256=Vas5IpJhb_GnPn4l-InPQt_-hdcdgZjaSKuooJRJw1k,10081
 kaiju_tools/loop.py,sha256=Nkih75UgPen5SvZYSU0XFb9cbH6Zle-Nbto0B_wpn50,195
@@ -11,15 +11,15 @@
 kaiju_tools/scheduler.py,sha256=Pe_7BHHTmM1tl2dIWqqW6DoJpup26q8HotQsLTL-LeM,6844
 kaiju_tools/serialization.py,sha256=GHby_IRwIPVypPL4M76nBs_GjezMXU4wvZV6D9LhqNc,159
 kaiju_tools/services.py,sha256=xV4uVv-kH0ee6gtbWDvVdArq3xeJ1uKSSTejAX04Ayk,8221
 kaiju_tools/templates.py,sha256=6NGAT8RSDdvLYbnqqkHWCQ7LRY4K6eQg1vtEA5FFO34,14345
 kaiju_tools/ttl_dict.py,sha256=aAFgZN0c_y1oTvp-LYdn3FTpOyJHabJiLuZixOBZB1s,3442
 kaiju_tools/types.py,sha256=jCsHrgFYYm9FcZbYEOP-Jmba32IL4Rxq-7QaTsaN4So,3691
 kaiju_tools/cache/__init__.py,sha256=DOBTuvdFLJH4ZW6F-WeoDKg-jeP2R3MTqxSzRdTpfvc,2595
-kaiju_tools/cache/abc.py,sha256=WYE_dsx-zpJXPvlA1Azdws_ztvxJZD9ie7Yyeo3Q9D0,10481
+kaiju_tools/cache/abc.py,sha256=MH3BXqvJUF_RXfPnGCxnDJsXMFiRwt5PHpLbZsPEpA4,10483
 kaiju_tools/cache/local_cache.py,sha256=4EIGa6sVgE_DTpoGWxsxPKUQVE4zuuboiMPfbZePRos,2373
 kaiju_tools/cache/services.py,sha256=fOsRyLPCUL2i8Lb5rwVzCK7C808UIdG-scxYydgwjoE,43
 kaiju_tools/cache/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/cache/tests/test_cache.py,sha256=y0r_F8VxVNDbtWkrPmRGLslN8ySPGYKw3h4t-UqCJl0,2315
 kaiju_tools/commands/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/config/__init__.py,sha256=KbKTvStzFIsCpT2fOcNJBjHQllQbcsP_K4pAjyP78ww,932
 kaiju_tools/config/config_loader.py,sha256=3jXHTnUqC40Vg9xSHK8If3FOA_kCTaSD7PpiOVtrYtU,7661
@@ -33,22 +33,22 @@
 kaiju_tools/docker/stack.py,sha256=7OwZPpuL0nFMQC-8B1bJXCm8qVNP3tGd0mv0XdhwwbA,11140
 kaiju_tools/docker/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/docker/tests/fixtures.py,sha256=0bx6BE7id5Rz52y3nEVXx0ZNjzPuDe_T9C6Jzq4iHaU,1625
 kaiju_tools/docker/tests/test_containers.py,sha256=Yugtil6wQs2DGp6W0lNJM0ZoihzG5d95z0u5StGIfJ0,575
 kaiju_tools/docker/tests/test_images.py,sha256=XDJ1Z3XQSQswiJxDO_QtKmw4NymJpXhSdvHtxCGg8rE,359
 kaiju_tools/docker/tests/test_stack.py,sha256=qa6UbjCBiVmAORKyWTs9HaArZF0ZLBDZSzGJlc3Bjhs,371
 kaiju_tools/encoding/__init__.py,sha256=hLMiGsFxCgusvfnq4MOPgI3jMGezZyU_KvE9qn80W3s,65
-kaiju_tools/encoding/abc.py,sha256=FbbC7PNwEno-dW7XYL9BcwhUcLj2j8DCye3HzKM7MPs,2937
+kaiju_tools/encoding/abc.py,sha256=15zbSDi0rl3BPQFTd3ZJiQs_gLTkgQdLFuxE-iCW23g,3857
 kaiju_tools/encoding/etc.py,sha256=8YKb6OZrb0is64xlvGkowUR2b_ivnzsW1IhZoMv8a3g,163
-kaiju_tools/encoding/json.py,sha256=xvPcEPuaVmDXugNzT2Kqb_ZBXyRpbaElKuE2pVGjP98,4456
-kaiju_tools/encoding/msgpack.py,sha256=rgNPfoLjFyhV2ZCyUE_kxKfwaruVv3RZ8wKZwIeOIgI,4353
+kaiju_tools/encoding/json.py,sha256=zHVd862fPXhEtlgJnvXBPnXLfM3Tc9BuUksAFqOEgzk,3437
+kaiju_tools/encoding/msgpack.py,sha256=LBpOgjLdLkoxx4Kh-L4z-1PIGwwOepZPwK_md1Wr8T8,4888
 kaiju_tools/encoding/serializers.py,sha256=EXcSZAsrEU3OPGJkGfCVKDVZ8KZNxfDYb2-hPAOMbbM,654
 kaiju_tools/encoding/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/encoding/tests/fixtures.py,sha256=9PC1mnDN0JLzHZU6Vg9x2p0uDcw3ASM-g_v5vJITu-c,780
-kaiju_tools/encoding/tests/test_serializers.py,sha256=ntdV6dihmwZNjzQiRm_xXoXhNAZzz6rGVbFTFSkAGnE,1054
+kaiju_tools/encoding/tests/test_serializers.py,sha256=M6u8-2w6vl3umgZwMOi9jaLutgE8x57ALxbRR9dX0ak,1132
 kaiju_tools/es/__init__.py,sha256=_lGbw9UADok07fqeMvLlZGHefDsJ7wppstJ8qkME_9k,46
 kaiju_tools/es/client.py,sha256=UBxzJsl71d6bZH96p-BAGX9SSEj3aedZpLXvGyA-sjk,18302
 kaiju_tools/es/loader.py,sha256=m0NcROSWb-yClZ5_d_Toc9guVuXdmB-xOmLyQVthFgg,5559
 kaiju_tools/es/schema.py,sha256=dvf4yhWGxPEAcWQv1LeIJNU9_Yc6Dcm0lxIl9TwE8hI,17588
 kaiju_tools/es/services.py,sha256=XLYIrzW4QnfsqWYK9vLT43i5dHqICAza6E1vEP0NVyw,66
 kaiju_tools/es/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/http/__init__.py,sha256=d0Q6Fn44e7wFfLabDOBxpcJ1DPKWlFunGYDUBmO-4hA,22
@@ -62,45 +62,45 @@
 kaiju_tools/locks/abc.py,sha256=zj0Aid19cqdyAiltCmhxkrzVQD1DGYaegvFb9DaPGMM,9093
 kaiju_tools/locks/etc.py,sha256=TFrcXD-qJg1ZDp6-2Wy6bLC1DCHB9XAji8WQ7oxYt-A,393
 kaiju_tools/locks/exceptions.py,sha256=ZCo4Q8IMbbOe81raMdDi6j-M1kQ2wdv1PbuR9Fsr9x8,284
 kaiju_tools/locks/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/locks/tests/test_locks.py,sha256=ygFVC-BTEgW_G6fBMDGAw2Y5mgZWt7xz9yfrilDKOeM,1913
 kaiju_tools/logging/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/logging/services.py,sha256=Q24V4UVrJJyEVMKkQYrOi4pWsKmuAnKTwKGRAgTypxM,3355
-kaiju_tools/logging/types.py,sha256=j9W7RV0uwH10fy75Lobi92TVKU-IVdnIebc8RPQHwKs,10173
+kaiju_tools/logging/types.py,sha256=eTu8BKD4ax2nK7ZwHylJLW_dGUYegyUEh5F2GCZPqwk,10306
 kaiju_tools/logging/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/logging/tests/test_loggers.py,sha256=byzlYqRVN7l6ZJ5Ph9_d4tjJx8MyDD75LnCBd_av4jo,1827
 kaiju_tools/rpc/__init__.py,sha256=1_nq0D65USGIS2jXxF_88fR-LfaiXXF-PqNBTlpkWkg,43
 kaiju_tools/rpc/abc.py,sha256=XfmsF66rP3wvW0_LGPx3JpU4NF_NWqNZg-DLDBb8Nzw,11883
 kaiju_tools/rpc/annotations.py,sha256=sBJNoJIf-FPCZ2001GcCGGoMB1vFrLF6F6GhK6iARS8,14813
 kaiju_tools/rpc/client.py,sha256=punHzb3AtLzBH343cZiJXb-kcXAtUKBPehJ22EmtVD4,4566
 kaiju_tools/rpc/client_gen.py,sha256=c94y7YWqR1yMeCGLut11r8OTD3BfVqlo9b_eWR95psk,4033
 kaiju_tools/rpc/context.py,sha256=l27TATs8IKs4f_690JRn75WY7TsjXWInDgqUrCP03FU,116
 kaiju_tools/rpc/etc.py,sha256=KkbYgTjWG8V1bhi8co2UrAjpUuHtYYYKpRBEe4hil9I,591
 kaiju_tools/rpc/jsonrpc.py,sha256=m1PUr-0j_2fPs5sxk8p-DQqipJefJG9SDKoh3cJBSJg,2943
-kaiju_tools/rpc/server.py,sha256=3cVE1YH0FRhUhEWPU2GB8pKUeqlz0cu1rRMk_gMswCs,24271
+kaiju_tools/rpc/server.py,sha256=6_iPtey-Q_gjJ98F-xtjGsbXXYh5f3Fan0rKbbLK7eQ,24013
 kaiju_tools/rpc/services.py,sha256=vCSwSA9g_cLwY-oYv6hg89LIdcTZ27PkT8s9L-5Kb20,75
 kaiju_tools/rpc/sessions.py,sha256=cSXssImSl2Wl8JmjITibpdSMqdUFap7dqKWS52MOCug,6259
 kaiju_tools/rpc/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/rpc/tests/fixtures.py,sha256=ZUCnwng4311T0uoENEgc9uaP3HKVvQJjCkLsvboGrnI,4653
 kaiju_tools/rpc/tests/test_annotation_parser.py,sha256=hcJv3RKcFy-zSwTIElnUCMrGnOec66STK3POAWjYRsM,9187
-kaiju_tools/rpc/tests/test_rpc_server.py,sha256=eGCwxL_YTQsnNgqBpSLbJd6drHRvPvlOltpDJwi68Gw,8657
+kaiju_tools/rpc/tests/test_rpc_server.py,sha256=wJlN8mdsyHjx4A8sobw3ib_RotV05sE-G37GW5nkb8w,8649
 kaiju_tools/streams/__init__.py,sha256=bhpk95OwBYJ974TetsrTwpv88i76IDGchaw-OAVVKC4,60
-kaiju_tools/streams/abc.py,sha256=EqQ4nKNUHJnqeFdUtZZrHlKFfH-haKWlpZV6rR1WluY,24595
+kaiju_tools/streams/abc.py,sha256=bihBgbi2CfAUh_1936l1-Y_W65Mf58dER8CT93Cidw0,24599
 kaiju_tools/streams/client.py,sha256=knHnf7g7s4B7n18IBsOfRiOdmhtbMNIW4-QVYhGLwaU,823
 kaiju_tools/streams/etc.py,sha256=xAaOal-vRdGluvVOL698eY7TdpV-lboqH39DEFWeP5c,152
 kaiju_tools/streams/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/streams/tests/fixtures.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/streams/tests/test_streams.py,sha256=xB-Dv5RppQMi66U-aZ1IdfJ147ZDdpjM-nCrAjJCdP4,5975
 kaiju_tools/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kaiju_tools/tests/fixtures.py,sha256=k1Ou6JiYt4XM4-6zMVzO23fPyD4yFslrF3gbbwl6SlU,2016
 kaiju_tools/tests/test_class_registry.py,sha256=D9mZu9sgY21gEWE8vp2HN0Vfb5WZqxWTNVRPWEPduhU,1408
 kaiju_tools/tests/test_mapping.py,sha256=HzxgQo-k2cBPE88F4AnhBv_Ixb0YS-dWL5rQtM_MRVE,3385
 kaiju_tools/tests/test_serialization.py,sha256=9ETlE5i8b2WFwKsTrECVuB14Pkxf4QgCc6oFX_yjMZw,481
 kaiju_tools/tests/test_services.py,sha256=fYhWYsp-aAyIYwAcLx0ScZhBLBPEX6Apf2LRVWe-WX8,2787
 kaiju_tools/tests/test_templates.py,sha256=CoQdRatGZhGzPl_y4MYXPTQMA9c_wn0ieVITQaamrL4,1692
 kaiju_tools/tests/test_ttl_dict.py,sha256=HWuoDepQdEWixOBlYhCzR1RVLHz20jXwa4SWrrr0A7o,796
-kaiju_tools-2.0.55.dist-info/LICENSE,sha256=XIlN2qA8UqpBDA-PteoYP4hTU0qBW0G9PRB__khO2zc,610
-kaiju_tools-2.0.55.dist-info/METADATA,sha256=K7Yltecrm1ax4cBZYazoNMEVOXPPbTiwpbxCscQrOgI,3258
-kaiju_tools-2.0.55.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-kaiju_tools-2.0.55.dist-info/top_level.txt,sha256=DIgXUScFnJtRLiRWfjo547JK4rMuTIJoioMPRe1Jn6Y,12
-kaiju_tools-2.0.55.dist-info/RECORD,,
+kaiju_tools-2.0.56.dist-info/LICENSE,sha256=XIlN2qA8UqpBDA-PteoYP4hTU0qBW0G9PRB__khO2zc,610
+kaiju_tools-2.0.56.dist-info/METADATA,sha256=LtuJLX7aqfhzJS0EaohJV4twhvJHJS380W_MzBbdPgg,3258
+kaiju_tools-2.0.56.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+kaiju_tools-2.0.56.dist-info/top_level.txt,sha256=DIgXUScFnJtRLiRWfjo547JK4rMuTIJoioMPRe1Jn6Y,12
+kaiju_tools-2.0.56.dist-info/RECORD,,
```

