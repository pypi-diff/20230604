# Comparing `tmp/karrio.dhl_express-2023.4.4-py3-none-any.whl.zip` & `tmp/karrio.dhl_express-2023.5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 26265 bytes, number of entries: 20
--rw-rw-r--  2.0 unx      576 b- defN 23-Mar-29 20:04 karrio/mappers/dhl_express/__init__.py
+Zip file size: 26469 bytes, number of entries: 20
+-rw-rw-r--  2.0 unx      623 b- defN 23-Jun-04 14:33 karrio/mappers/dhl_express/__init__.py
 -rw-rw-r--  2.0 unx     3374 b- defN 23-Apr-23 04:04 karrio/mappers/dhl_express/mapper.py
 -rw-rw-r--  2.0 unx     1938 b- defN 23-Apr-23 04:04 karrio/mappers/dhl_express/proxy.py
 -rw-rw-r--  2.0 unx      447 b- defN 23-Apr-23 04:04 karrio/mappers/dhl_express/settings.py
 -rw-rw-r--  2.0 unx      690 b- defN 22-Nov-15 19:21 karrio/providers/dhl_express/__init__.py
--rw-rw-r--  2.0 unx     2855 b- defN 23-May-17 00:17 karrio/providers/dhl_express/address.py
+-rw-rw-r--  2.0 unx     2855 b- defN 23-May-21 02:20 karrio/providers/dhl_express/address.py
 -rw-rw-r--  2.0 unx      642 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/error.py
--rw-rw-r--  2.0 unx     8912 b- defN 23-May-20 10:01 karrio/providers/dhl_express/rate.py
--rw-rw-r--  2.0 unx    18091 b- defN 23-May-17 00:17 karrio/providers/dhl_express/shipment.py
+-rw-rw-r--  2.0 unx     9022 b- defN 23-Jun-04 15:02 karrio/providers/dhl_express/rate.py
+-rw-rw-r--  2.0 unx    18091 b- defN 23-May-21 02:20 karrio/providers/dhl_express/shipment.py
 -rw-rw-r--  2.0 unx     3768 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/tracking.py
--rw-rw-r--  2.0 unx    26580 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/units.py
--rw-rw-r--  2.0 unx     1558 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/utils.py
+-rw-rw-r--  2.0 unx    26856 b- defN 23-Jun-04 14:19 karrio/providers/dhl_express/units.py
+-rw-rw-r--  2.0 unx     1849 b- defN 23-Jun-04 14:11 karrio/providers/dhl_express/utils.py
 -rw-rw-r--  2.0 unx      307 b- defN 22-Nov-15 19:21 karrio/providers/dhl_express/pickup/__init__.py
 -rw-rw-r--  2.0 unx     2369 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/pickup/cancel.py
--rw-rw-r--  2.0 unx     4512 b- defN 23-May-17 00:17 karrio/providers/dhl_express/pickup/create.py
+-rw-rw-r--  2.0 unx     4512 b- defN 23-May-21 02:20 karrio/providers/dhl_express/pickup/create.py
 -rw-rw-r--  2.0 unx     4754 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/pickup/update.py
--rw-rw-r--  2.0 unx     1022 b- defN 23-May-20 11:14 karrio.dhl_express-2023.4.4.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-May-20 11:14 karrio.dhl_express-2023.4.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx        7 b- defN 23-May-20 11:14 karrio.dhl_express-2023.4.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1897 b- defN 23-May-20 11:14 karrio.dhl_express-2023.4.4.dist-info/RECORD
-20 files, 84391 bytes uncompressed, 23085 bytes compressed:  72.6%
+-rw-rw-r--  2.0 unx     1020 b- defN 23-Jun-04 15:16 karrio.dhl_express-2023.5.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jun-04 15:16 karrio.dhl_express-2023.5.dist-info/WHEEL
+-rw-rw-r--  2.0 unx        7 b- defN 23-Jun-04 15:16 karrio.dhl_express-2023.5.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1889 b- defN 23-Jun-04 15:16 karrio.dhl_express-2023.5.dist-info/RECORD
+20 files, 85105 bytes uncompressed, 23305 bytes compressed:  72.6%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: karrio/providers/dhl_express/pickup/create.py
 Comment: 
 
 Filename: karrio/providers/dhl_express/pickup/update.py
 Comment: 
 
-Filename: karrio.dhl_express-2023.4.4.dist-info/METADATA
+Filename: karrio.dhl_express-2023.5.dist-info/METADATA
 Comment: 
 
-Filename: karrio.dhl_express-2023.4.4.dist-info/WHEEL
+Filename: karrio.dhl_express-2023.5.dist-info/WHEEL
 Comment: 
 
-Filename: karrio.dhl_express-2023.4.4.dist-info/top_level.txt
+Filename: karrio.dhl_express-2023.5.dist-info/top_level.txt
 Comment: 
 
-Filename: karrio.dhl_express-2023.4.4.dist-info/RECORD
+Filename: karrio.dhl_express-2023.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## karrio/mappers/dhl_express/__init__.py

```diff
@@ -14,8 +14,9 @@
     Proxy=Proxy,
     Settings=Settings,
     # Data Units
     options=units.ShippingOption,
     package_presets=units.PackagePresets,
     packaging_types=units.DCTPackageType,
     services=units.ShippingService,
+    connection_configs=units.ConnectionConfig,
 )
```

## karrio/providers/dhl_express/rate.py

```diff
@@ -39,17 +39,18 @@
     settings: provider_utils.Settings,
     ctx: typing.Dict[str, typing.Any] = {},
 ) -> models.RateDetails:
     is_document = ctx.get("is_document", False)
     is_international = ctx.get("is_international", False)
     service = provider_units.ShippingService.map(quote.GlobalProductCode)
 
-    invalid_service = is_document is False and "DOC" in quote.LocalProductCode
-
-    if invalid_service:
+    # Filter out services that are not specific to package content
+    if settings.connection_config.skip_service_filter.state != True and (
+        is_document is False and " DOC" in quote.LocalProductCode
+    ):
         return None
 
     charges = [
         ("Base charge", quote.WeightCharge),
         *((s.LocalServiceTypeName, s.ChargeValue) for s in quote.QtdShpExChrg),
     ]
```

## karrio/providers/dhl_express/units.py

```diff
@@ -279,14 +279,21 @@
     pallet = dhl_freight
     small_box = dhl_junior_jumbo_box
     medium_box = dhl_jumbo_box
     large_box = dhl_jumbo_parcel
     your_packaging = dhl_your_packaging
 
 
+class ConnectionConfig(lib.Enum):
+    label_type = lib.OptionEnum("label_type")
+    skip_service_filter = lib.OptionEnum("skip_service_filter")
+    shipping_options = lib.OptionEnum("shipping_options", list)
+    shipping_services = lib.OptionEnum("shipping_services", list)
+
+
 class ShippingService(lib.Enum):
     dhl_logistics_services = "0"
     dhl_domestic_express_12_00 = "1"
     dhl_express_choice = "2"
     dhl_express_choice_nondoc = "3"
     dhl_jetline = "4"
     dhl_sprintline = "5"
```

## karrio/providers/dhl_express/utils.py

```diff
@@ -1,10 +1,11 @@
 import dhl_express_lib.datatypes_global_v62 as dhl
 import time
 import typing
+import karrio.lib as lib
 import karrio.core as core
 import karrio.core.units as units
 
 
 class Settings(core.Settings):
     """DHL connection settings."""
 
@@ -29,14 +30,23 @@
         )
 
     @property
     def tracking_url(self):
         return "https://www.dhl.com/ca-en/home/tracking/tracking-parcel.html?submit=1&tracking-id={}"
 
     @property
+    def connection_config(self) -> lib.units.Options:
+        from karrio.providers.dhl_express.units import ConnectionConfig
+
+        return lib.to_connection_config(
+            self.config or {},
+            option_type=ConnectionConfig,
+        )
+
+    @property
     def default_currency(self) -> typing.Optional[str]:
         return units.CountryCurrency.map(self.account_country_code).value or "USD"
 
     def Request(self, **kwargs) -> dhl.Request:
         return dhl.Request(
             ServiceHeader=dhl.ServiceHeader(
                 MessageReference="1234567890123456789012345678901",
```

## Comparing `karrio.dhl_express-2023.4.4.dist-info/METADATA` & `karrio.dhl_express-2023.5.dist-info/METADATA`

 * *Files 12% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: karrio.dhl-express
-Version: 2023.4.4
+Version: 2023.5
 Summary: Karrio - DHL Express Shipping Extension
 Home-page: https://github.com/karrioapi/karrio
 Author: karrio
 Author-email: hello@karrio.io
 License: Apache-2.0
 Platform: UNKNOWN
 Classifier: Intended Audience :: Developers
```

## Comparing `karrio.dhl_express-2023.4.4.dist-info/RECORD` & `karrio.dhl_express-2023.5.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,20 +1,20 @@
-karrio/mappers/dhl_express/__init__.py,sha256=7cqCCaAnyWiX1gBoftM7u7QZtjl-XKYFQVi4cHGMB8A,576
+karrio/mappers/dhl_express/__init__.py,sha256=ZOM6vz5SyIgdwRUl-uSEgQwpLeJAuG0rs8O8wd0huxU,623
 karrio/mappers/dhl_express/mapper.py,sha256=M2Px75ARflQDsG94aCl9mDUMsjXmglb0ltvAqD4EtpU,3374
 karrio/mappers/dhl_express/proxy.py,sha256=mD8E1X_UOkD9tWGnNGoR0BKIgArrgnMOZPqzUlCE4RY,1938
 karrio/mappers/dhl_express/settings.py,sha256=2HvIz_cxPTo1hscFGbw_AII834li5NnT8C0JLuf3wrM,447
 karrio/providers/dhl_express/__init__.py,sha256=LalDeH-5sDXL4IEc8QMvm6S3oEOprwQ9g6upfVQCJJw,690
 karrio/providers/dhl_express/address.py,sha256=kW7HpbTbvMgpRknr9cljbXUdC36pWdXeC7BhvybsGRE,2855
 karrio/providers/dhl_express/error.py,sha256=HvmPOfCW2SVard58n1FhLQXZZC24-T9c5JFJloZXmGc,642
-karrio/providers/dhl_express/rate.py,sha256=-UyhEIwhPO7A50wUMmldFKLUrOwmeXHK3p4uBpWrQ94,8912
+karrio/providers/dhl_express/rate.py,sha256=aSnbZmlAJBZ7vfHFdtleaXnrxHL9w8CQq3G5mxI4dgM,9022
 karrio/providers/dhl_express/shipment.py,sha256=4CKrLunmJJld7JRLBtDU8llK8B_ZeLUygnDUBAObiQQ,18091
 karrio/providers/dhl_express/tracking.py,sha256=rLmnY1znPOxdQkIJ3nimZUSozjVidG-dRgNDK812M20,3768
-karrio/providers/dhl_express/units.py,sha256=iUPoiclY5JKTqOisGikI2zPBLlH5L9VTSMQeE8gAtcw,26580
-karrio/providers/dhl_express/utils.py,sha256=-jAkpNAZwgRNC09Tsv7f19JF93XKDiknT9Vb85WUfjY,1558
+karrio/providers/dhl_express/units.py,sha256=JfBn1tumemrF6oPEuRAvGFlMf3s1tVxucpXKKtSuAiw,26856
+karrio/providers/dhl_express/utils.py,sha256=L1z1MjvW3SwGsg7hMUOzfGc6FRLCxcUM6MQBic4o-AU,1849
 karrio/providers/dhl_express/pickup/__init__.py,sha256=mKF_9pkJatfdM_CPMI9vwhFI6-R9OFFjXbnNtc_kiu0,307
 karrio/providers/dhl_express/pickup/cancel.py,sha256=5U5609IYDpZKH7DhgDmrSf8oQEBPVQQfFdCGmHIVDWE,2369
 karrio/providers/dhl_express/pickup/create.py,sha256=HtdopvNrnK0PQDA8OdA6FOsfg81nJ2j50AlE0aoOG8Y,4512
 karrio/providers/dhl_express/pickup/update.py,sha256=a7P-dJCwn01alnd_a0I2PUZzbcCCH0ZBHGZsxoRk2oA,4754
-karrio.dhl_express-2023.4.4.dist-info/METADATA,sha256=B9tl3pwGDTtARlqoDR19LldLp4gD9R_fvBQCLAyCqVU,1022
-karrio.dhl_express-2023.4.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-karrio.dhl_express-2023.4.4.dist-info/top_level.txt,sha256=mfkVZXzNuVRmA7NRlck_Ub-C8Zgtqxbx3gX1Rq_W-i0,7
-karrio.dhl_express-2023.4.4.dist-info/RECORD,,
+karrio.dhl_express-2023.5.dist-info/METADATA,sha256=-qtj5tprqEso8Z_SJZO08gk4CmfPD_wgIJL2jRhwEhY,1020
+karrio.dhl_express-2023.5.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+karrio.dhl_express-2023.5.dist-info/top_level.txt,sha256=mfkVZXzNuVRmA7NRlck_Ub-C8Zgtqxbx3gX1Rq_W-i0,7
+karrio.dhl_express-2023.5.dist-info/RECORD,,
```

